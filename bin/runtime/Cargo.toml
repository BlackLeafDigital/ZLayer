[package]
name = "runtime"
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
rust-version.workspace = true
description = "ZLayer container orchestration runtime"

[[bin]]
name = "zlayer"
path = "src/main.rs"

[features]
default = ["full"]
# Full runtime with all CLI commands
full = ["serve", "join", "deploy", "node"]
# Enable serve command (API server mode)
serve = []
# Enable join command (agent/worker node mode)
join = []
# Enable deploy command (orchestration mode)
deploy = []
# Enable node command (cluster management)
node = []

[dependencies]
# Internal crates - always required
agent = { path = "../../crates/agent" }
spec = { path = "../../crates/spec" }
observability = { path = "../../crates/observability" }
init_actions = { path = "../../crates/init_actions" }
builder = { path = "../../crates/builder" }
scheduler = { path = "../../crates/scheduler" }
overlay = { path = "../../crates/overlay" }
zlayer-core = { path = "../../crates/zlayer-core" }

# API server
api = { path = "../../crates/api" }

# External dependencies
clap = { workspace = true }
tokio = { workspace = true }
tracing = { workspace = true }
anyhow = { workspace = true }
base64 = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
serde_yaml = { workspace = true }
reqwest = { workspace = true }
rand = { workspace = true }
chrono = { workspace = true }
uuid = { workspace = true }
